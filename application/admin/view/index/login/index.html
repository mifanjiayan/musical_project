<!doctype html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>
        管理中心</title>
    <link href="/Public/Front/newadmin/css/jllogin.css" rel="stylesheet" type="text/css">
    <link href="/Public/Front/css/font-awesome.min.css" rel="stylesheet">
    <script src="/Public/js/jquery.js" type="text/javascript"></script>
    <script src="/Public/Front/newadmin/resource/js/common.js" type="text/javascript"></script>
    <script src="/Public/Front/newadmin/resource/js/jquery.validation.min.js"></script>
    <script src="/Public/Front/newadmin/js/jquery.supersized.min.js"></script>
    <script src="/Public/Front/newadmin/js/jquery.progressBar.js" type="text/javascript"></script>
    <style>
        .submit {
            position: relative;
        }
    </style>
    <script>
        function getOs() {
            var OsObject = "";
            if (navigator.userAgent.indexOf("MSIE") > 0) {
                return "MSIE";
            } else if (isFirefox = navigator.userAgent.indexOf("Firefox") > 0) {
                return "Firefox";
            } else if (isMozilla = navigator.userAgent.indexOf("Opera") > 0) { //这个也被判断为chrome
                return "Opera";
            } else if (isFirefox = navigator.userAgent.indexOf("Chrome") > 0) {
                return "Chrome";
            } else if (isSafari = navigator.userAgent.indexOf("Safari") > 0) {
                return "Safari";
            } else if (isCamino = navigator.userAgent.indexOf("Camino") > 0) {
                return "Camino";
            } else if (isMozilla = navigator.userAgent.indexOf("Gecko/") > 0) {
                return "Gecko";
            }

        }
    </script>
</head>

<body>
<!--主体-->
<div class="bg1"></div>
<div class="gyl"> <{$sitename}>
    <div class="gy2">管理中心</div>
</div>
<div class="bg">
    <div class="wel">管理员登陆</div>
    <form method="post" class="layui-form" id="form_login" action="<{:U('Admin/Login/checkLogin')}>">
        <div class="user input-username">
            <label class="yonghu">账&nbsp;&nbsp;&nbsp;号</label>
            <input name="username" id="user_name" autocomplete="off" type="text" lay-verify="required" value="" required>
        </div>
        <div class="password input-username">
            <label class="yonghu">密&nbsp;&nbsp;&nbsp;码</label>
            <input name="password" id="password" autocomplete="off" type="password" required lay-verify="required" pattern="[\S]{6}[\S]*" title="密码不少于6个字符">
        </div>
        <div class="submit"> <span>
              <div class="yzm" >
                <div class="code">
                  <div class="arrow"></div>
                  <div class="code-img"> <img  src="<{:U('Admin/Login/verifycode')}>?t=<{:time()}>" alt="点击更换" title="点击更换" onclick="changeCode()" class="captcha" name="codeimage" id="codeimage" border="0"/> </div>
                  <a href="JavaScript:void(0);" id="hide" class="close" title="关闭"><i></i></a><a href="JavaScript:void(0);"  class="change" id="changeCode" onclick="changeCode()" title="看不清,点击更换验证码"><i></i></a> </div>
                <div class="yonghu" >验证码</div>
                <input name="verify" required lay-verify="required" type="text" class="input-code" id="captcha" pattern="[A-z0-9]{4}" title="验证码为4个字符" autocomplete="off" value="" >
              </div>
              </span> <span>
              <input name="" class="input-button btn-submit" type="button" value="登录">
              </span> </div>
    </form>
    <div class="bottom">
    </div>
</div>
<div class="submit2"></div>

<script>
    // 定义全局JS变量
    var GV = {
        current_controller: "admin//",
        base_url: "/Public/Front"
    };
</script>

<script src="/Public/Front/js/plugins/layui/layui.js"></script>

<!--页面JS脚本-->

<script>
    function changeCode() {

        $("#codeimage").attr("src", '<{:U("Admin/Login/verifycode")}>?t=' + parseInt(40 * Math.random()));
    };
    layui.use(['laydate', 'layer', 'element'], function() {
        var laydate = layui.laydate //日期
            ,
            layer = layui.layer //弹层
            ,
            element = layui.element; //元素操作
    });
    $(function() {
        //显示隐藏验证码
        $("#hide").click(function() {
            $(".code").fadeOut("slow");
        });
        $("#captcha").focus(function() {

            $(".code").fadeIn("fast");
            if (getOs() == "Firefox") {
                $(".code").css("top", "-85px");
            }
        });
        //跳出框架在主窗口登录
        if (top.location != this.location) top.location = this.location;
        $('#user_name').focus();
        $("#captcha").nc_placeholder();
        //动画登录
        $('.btn-submit').click(function(data) {
            $('.gyl').addClass('animated fadeOutLeft');
            $('.bg').addClass('animated fadeOutRight');
            $('.submit2').addClass('bgblack');
            setTimeout(function() {
                    $('.submit2').html('<div class="naemie">聚龙系统管理中心</div><div class="progress"><div class="progress-bar progress-bar-success" aria-valuetransitiongoal="100"></div></div>');
                    $('.progress .progress-bar').progressbar({
                        done: function() {
                            $.ajax({
                                url: $("#form_login").attr("action"),
                                type: $("#form_login").attr("method"),
                                data: $("#form_login").serialize(),
                                success: function(info) {
                                    if (!info.status) {
                                        setTimeout(function() {
                                            location.href = info.url;
                                        }, 1000);
                                        layer.msg(info.msg);
                                    } else {
                                        layer.msg(info.msg, {
                                            icon: 5
                                        });
                                        return false;
                                    }
                                }
                            });
                        }
                    });
                },
                300);

        });
        // 回车提交表单
        $('#form_login').keydown(function(event) {
            if (event.keyCode == 13) {
                $('.btn-submit').click();
            }
        });
        // 定义全局JS变量
        var GV = {
            current_controller: "admin//"
        };
    });
</script>

<script>
    //固定层移动
    $(function() {
        //管理显示与隐藏
        $("#admin-manager-btn").click(function() {
            if ($(".manager-menu").css("display") == "none") {
                $(".manager-menu").css('display', 'block');
                $("#admin-manager-btn").attr("title", "关闭快捷管理");
                $("#admin-manager-btn").removeClass().addClass("arrow-close");
            } else {
                $(".manager-menu").css('display', 'none');
                $("#admin-manager-btn").attr("title", "显示快捷管理");
                $("#admin-manager-btn").removeClass().addClass("arrow");
            }
        });
    });
</script>
</body>

</html>